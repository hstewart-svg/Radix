<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radix | Unified Architect</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const App = () => {
            const [view, setView] = useState('home');
            const [materialityBase, setMaterialityBase] = useState(41218000);
            const [company, setCompany] = useState("NewCo Entity");
            const [isScrutinizing, setIsScrutinizing] = useState(false);

            // CORE RCM DATA
            const [rcmData, setRcmData] = useState([
                { id: 1, process: "P2P", sub: "Invoice Processing", country: "US", assertion: "C", freq: "Daily", type: "Manual", risk: 85, judgment: 20, impact: 5000000, mrc: false, challenge: "Volume creates fatigue risk." },
                { id: 2, process: "P2P", sub: "Invoice Processing", country: "UK", assertion: "C", freq: "Daily", type: "Manual", risk: 85, judgment: 20, impact: 2000000, mrc: false, challenge: "Local variation risk." },
                { id: 3, process: "R2R", sub: "Journal Entries", country: "Germany", assertion: "E", freq: "Monthly", type: "Manual", risk: 90, judgment: 85, impact: 1200000, mrc: true, challenge: "High judgment on accruals." },
                { id: 4, process: "H2R", sub: "Payroll", country: "Global", assertion: "V", freq: "Monthly", type: "ITAC", risk: 20, judgment: 10, impact: 8000000, mrc: false, challenge: "ITGC dependent." }
            ]);

            const analysis = useMemo(() => {
                const pm = (materialityBase * 0.05) * 0.75;
                const inScope = rcmData.filter(c => c.impact >= pm);
                const subCounts = rcmData.reduce((acc, c) => { acc[c.sub] = (acc[c.sub] || 0) + 1; return acc; }, {});
                const debt = inScope.reduce((acc, c) => acc + (c.type === 'Manual' ? (c.freq === 'Daily' ? 39 : 2) * 2 * 175 : 0), 0);
                return { pm, inScope, debt, subCounts };
            }, [rcmData, materialityBase]);

            const Tile = ({ title, sub, icon, target }) => (
                <button onClick={() => setView(target)} className="bg-white p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-sm hover:border-indigo-500 hover:shadow-xl transition-all text-left group">
                    <div className="w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-indigo-50 text-slate-400 group-hover:text-indigo-600 transition-colors">
                        {icon}
                    </div>
                    <h3 className="text-xl font-black text-slate-800 uppercase tracking-tighter italic">{title}</h3>
                    <p className="text-[10px] text-slate-400 font-bold uppercase mt-2 tracking-[0.2em]">{sub}</p>
                </button>
            );

            return (
                <div className="min-h-screen">
                    <nav className="bg-slate-900 text-white p-6 border-b-4 border-indigo-500">
                        <div className="max-w-7xl mx-auto flex justify-between items-center">
                            <button onClick={() => setView('home')} className="flex items-center gap-4">
                                <div className="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center font-black">R</div>
                                <div>
                                    <h1 className="text-xl font-black tracking-tighter uppercase italic leading-none">Radix <span className="text-indigo-400">Architect</span></h1>
                                    <p className="text-[9px] tracking-[0.3em] text-slate-500 font-bold uppercase mt-1 italic">{company}</p>
                                </div>
                            </button>
                            {view !== 'home' && <button onClick={() => setView('home')} className="text-[10px] font-black uppercase text-slate-400 hover:text-white">← Back to Portal</button>}
                        </div>
                    </nav>

                    <main className="p-8 max-w-7xl mx-auto">
                        {view === 'home' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 py-12 animate-in fade-in duration-500">
                                <Tile title="Governance" sub="Rules & Materiality" target="config" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M12 3v18M3 12h18"/></svg>} />
                                <Tile title="Bifurcation" sub="Fragmentation Map" target="bifurcator" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M13 3v6h8V3h-8zm0 18h8v-6h-8v6zM3 21h8v-6H3v6zM3 3v6h8V3H3z"/></svg>} />
                                <Tile title="Transformation" sub="ROI & Efficiency" target="modeler" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>} />
                                <Tile title="Judgment Lab" sub="Critical Thinking" target="lab" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>} />
                            </div>
                        )}

                        {view === 'bifurcator' && (
                            <div className="space-y-8 animate-in slide-in-from-bottom-4">
                                <div className="bg-white p-10 rounded-[3rem] border shadow-sm flex justify-between items-center">
                                    <h2 className="text-3xl font-black uppercase italic tracking-tighter italic">Bifurcation Matrix</h2>
                                    <div className="text-right">
                                        <p className="text-[10px] font-black text-red-500 uppercase">Current Control Debt</p>
                                        <p className="text-3xl font-black">${Math.round(analysis.debt).toLocaleString()}</p>
                                    </div>
                                </div>
                                <div className="bg-white rounded-[3rem] border shadow-sm overflow-hidden">
                                    <table className="w-full text-left">
                                        <thead className="bg-slate-50 border-b text-[10px] font-black text-slate-400 uppercase tracking-widest"><tr className="p-8"><th className="p-8">Hierarchy</th><th className="p-8">Geog.</th><th className="p-8">Status</th><th className="p-8">Action</th></tr></thead>
                                        <tbody className="divide-y">
                                            {analysis.inScope.map((c, i) => (
                                                <tr key={i} className={`hover:bg-slate-50 ${analysis.subCounts[c.sub] > 1 ? 'bg-amber-50/20' : ''}`}>
                                                    <td className="p-8"><p className="font-black uppercase text-xs">{c.process}</p><p className="text-[10px] font-bold text-slate-400">{c.sub}</p></td>
                                                    <td className="p-8"><span className="bg-slate-200 px-3 py-1 rounded-full text-[10px] font-black uppercase">{c.country}</span></td>
                                                    <td className="p-8"><span className="text-[10px] font-black uppercase">{c.type} • {c.freq}</span></td>
                                                    <td className="p-8"><button onClick={()=>setRcmData(rcmData.map(item=>item.id===c.id?{...item, type:'ITAC', country:'Global COE'}:item))} className="bg-indigo-600 text-white text-[9px] font-black px-4 py-2 rounded-lg uppercase tracking-widest">Standardize</button></td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {view === 'lab' && (
                            <div className="space-y-8 animate-in slide-in-from-bottom-4">
                                <div className="bg-white p-10 rounded-[3rem] border shadow-sm flex justify-between items-center">
                                    <h2 className="text-3xl font-black uppercase italic tracking-tighter">Judgment Scrutiny</h2>
                                    <button onClick={()=>setIsScrutinizing(!isScrutinizing)} className={`px-8 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${isScrutinizing ? 'bg-red-600 text-white animate-pulse' : 'bg-slate-900 text-white'}`}>
                                        {isScrutinizing ? "Scrutiny Active" : "Run Challenge"}
                                    </button>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    {analysis.inScope.filter(c => c.judgment > 50).map((c, i) => (
                                        <div key={i} className={`p-8 rounded-[2.5rem] border-2 transition-all ${isScrutinizing ? 'bg-red-50 border-red-200 shadow-inner' : 'bg-white border-slate-100'}`}>
                                            <h4 className="text-xl font-black text-slate-800 uppercase italic">{c.sub}</h4>
                                            <p className="text-xs text-slate-500 italic mt-2">"High Judgment Area: Accruals and Estimates"</p>
                                            {isScrutinizing && <div className="mt-6 p-6 bg-white rounded-2xl border-l-4 border-red-500 text-sm font-medium text-red-900 animate-in slide-in-from-left-4">{c.challenge}</div>}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        {(view === 'config' || view === 'modeler') && (
                            <div className="text-center py-40 bg-white rounded-[3rem] border-2 border-dashed border-slate-200">
                                <h2 className="text-4xl text-slate-200 font-black uppercase italic">Module Under Revision</h2>
                                <p className="text-slate-400 text-sm mt-4 italic">"Transformation Logic active. Awaiting final parameter set."</p>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
