<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Modeler</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const App = () => {
            const [view, setView] = useState('home');
            const [hourlyRate, setHourlyRate] = useState(175);
            const [materialityBase, setMaterialityBase] = useState(41218000);
            const [company, setCompany] = useState("NewCo Entity");
            const [year, setYear] = useState("2026");

            const [rcmData, setRcmData] = useState([
                { id: 1, process: "P2P", sub: "Invoice Processing", country: "US", assertion: "C", freq: "Daily", type: "Manual", mrc: false, fraud: true, impact: 5000000 },
                { id: 2, process: "P2P", sub: "Invoice Processing", country: "UK", assertion: "C", freq: "Daily", type: "Manual", mrc: false, fraud: true, impact: 2000000 },
                { id: 3, process: "R2R", sub: "Journal Entries", country: "Germany", assertion: "E", freq: "Monthly", type: "Manual", mrc: true, fraud: true, impact: 1200000 },
                { id: 4, process: "H2R", sub: "Payroll Accrual", country: "Global", assertion: "V", freq: "Monthly", type: "ITAC", mrc: false, fraud: false, impact: 8000000 }
            ]);

            const analysis = useMemo(() => {
                const pm = (materialityBase * 0.05) * 0.75;
                const inScope = rcmData.filter(c => c.impact >= pm);
                const subCounts = rcmData.reduce((acc, c) => { acc[c.sub] = (acc[c.sub] || 0) + 1; return acc; }, {});
                const debt = inScope.reduce((acc, c) => {
                    if (c.type === "Manual") {
                        const samples = c.freq === "Daily" ? 40 : 3;
                        return acc + ((samples - 1) * 2.5 * hourlyRate);
                    }
                    return acc;
                }, 0);
                return { pm, inScope, debt, subCounts };
            }, [rcmData, materialityBase, hourlyRate]);

            const Tile = ({ title, sub, icon, target }) => (
                <button onClick={() => setView(target)} className="bg-white p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-sm hover:border-indigo-500 hover:shadow-xl transition-all text-left group">
                    <div className="w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-indigo-50 text-slate-400 group-hover:text-indigo-600 transition-colors">
                        {icon}
                    </div>
                    <h3 className="text-xl font-black text-slate-800 uppercase tracking-tighter">{title}</h3>
                    <p className="text-xs text-slate-400 font-bold uppercase mt-2 tracking-widest">{sub}</p>
                </button>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    <nav className="bg-slate-900 text-white p-6 border-b-4 border-indigo-500">
                        <div className="max-w-7xl mx-auto flex justify-between items-center">
                            <button onClick={() => setView('home')} className="flex items-center gap-4 group">
                                <div className="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center font-black">R</div>
                                <div>
                                    <h1 className="text-xl font-black tracking-tighter uppercase italic leading-none">Transformation <span className="text-indigo-400">Modeler</span></h1>
                                    <p className="text-[8px] tracking-[0.4em] text-slate-500 font-bold uppercase mt-1">{company} | FY{year}</p>
                                </div>
                            </button>
                            {view !== 'home' && (
                                <button onClick={() => setView('home')} className="text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white">← Back to Portal</button>
                            )}
                        </div>
                    </nav>

                    <main className="flex-1 p-8 max-w-7xl mx-auto w-full">
                        {view === 'home' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 animate-in fade-in duration-500 py-12">
                                <Tile title="Governance Foundation" sub="Materiality & Rules" target="config" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M12 3v18M3 12h18"/></svg>} />
                                <Tile title="RCM DNA Ingest" sub="Process Mapping" target="dna" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M4 7h16M4 12h16M4 17h16"/></svg>} />
                                <Tile title="Bifurcation Architect" sub="Fragmentation Map" target="bifurcator" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M13 3v6h8V3h-8zm0 18h8v-6h-8v6zM3 21h8v-6H3v6zM3 3v6h8V3H3z"/></svg>} />
                                <Tile title="Efficiency Engine" sub="Control Debt & ROI" target="efficiency" icon={<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" className="w-6 h-6"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>} />
                            </div>
                        )}

                        {view === 'config' && (
                            <div className="bg-white p-12 rounded-[3rem] border shadow-sm animate-in slide-in-from-bottom-4">
                                <h2 className="text-3xl font-black uppercase italic tracking-tighter mb-10">Governance Foundation</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                                    <div className="space-y-6">
                                        <label className="block text-[10px] font-black uppercase text-slate-400">Entity Name</label>
                                        <input value={company} onChange={e=>setCompany(e.target.value)} className="w-full p-4 bg-slate-50 rounded-2xl border-2 border-slate-100 font-bold" />
                                        <label className="block text-[10px] font-black uppercase text-slate-400">Hourly Rate ($)</label>
                                        <input type="number" value={hourlyRate} onChange={e=>setHourlyRate(Number(e.target.value))} className="w-full p-4 bg-slate-50 rounded-2xl border-2 border-slate-100 font-bold" />
                                    </div>
                                    <div className="space-y-6">
                                        <label className="block text-[10px] font-black uppercase text-slate-400">Fiscal Year</label>
                                        <input value={year} onChange={e=>setYear(e.target.value)} className="w-full p-4 bg-slate-50 rounded-2xl border-2 border-slate-100 font-bold" />
                                        <label className="block text-[10px] font-black uppercase text-slate-400">EBITDA Base ($)</label>
                                        <input type="number" value={materialityBase} onChange={e=>setMaterialityBase(Number(e.target.value))} className="w-full p-4 bg-slate-50 rounded-2xl border-2 border-slate-100 font-bold text-indigo-600" />
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'bifurcator' && (
                            <div className="space-y-8 animate-in slide-in-from-bottom-4">
                                <div className="bg-white p-10 rounded-[3rem] border shadow-sm flex justify-between items-center">
                                    <h2 className="text-3xl font-black uppercase italic tracking-tighter">Bifurcation Matrix</h2>
                                    <div className="text-right">
                                        <p className="text-[10px] font-black text-red-500 uppercase">Control Debt identified</p>
                                        <p className="text-3xl font-black text-slate-900">${Math.round(analysis.debt).toLocaleString()}</p>
                                    </div>
                                </div>
                                <div className="bg-white rounded-[3rem] border shadow-sm overflow-hidden">
                                    <table className="w-full text-left">
                                        <thead className="bg-slate-50 border-b text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                            <tr><th className="p-8">Process Hierarchy</th><th className="p-8">Geography</th><th className="p-8">Type & Tags</th><th className="p-8">Status</th></tr>
                                        </thead>
                                        <tbody className="divide-y">
                                            {analysis.inScope.map((c, i) => (
                                                <tr key={i} className={`hover:bg-slate-50 ${analysis.subCounts[c.sub] > 1 ? 'bg-amber-50/20' : ''}`}>
                                                    <td className="p-8">
                                                        <p className="font-black uppercase text-xs">{c.process}</p>
                                                        <p className="text-[10px] font-bold text-slate-400">{c.sub} ({c.assertion})</p>
                                                    </td>
                                                    <td className="p-8">
                                                        <span className="bg-slate-200 px-3 py-1 rounded-full text-[10px] font-black uppercase">{c.country}</span>
                                                    </td>
                                                    <td className="p-8">
                                                        <div className="flex flex-col gap-1">
                                                            <span className="text-[10px] font-black text-slate-800 uppercase">{c.type} • {c.freq}</span>
                                                            <div className="flex gap-1">
                                                                {analysis.subCounts[c.sub] > 1 && <span className="bg-amber-100 text-amber-700 text-[7px] font-black px-1 rounded uppercase">Fragmented</span>}
                                                                {c.fraud && <span className="bg-red-100 text-red-700 text-[7px] font-black px-1 rounded uppercase">Fraud Risk</span>}
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td className="p-8">
                                                        <button onClick={() => setRcmData(rcmData.map(item => item.id === c.id ? {...item, type: 'ITAC', country: 'Global COE'} : item))} className="bg-emerald-600 text-white text-[9px] font-black px-4 py-2 rounded-lg uppercase tracking-widest">Automate</button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                        
                        {(view === 'dna' || view === 'efficiency') && (
                            <div className="text-center py-40 bg-white rounded-[3rem] border-2 border-dashed border-slate-200">
                                <h2 className="text-4xl text-slate-200 font-black uppercase">Module Pending Ingest</h2>
                                <p className="text-slate-400 text-sm mt-4 italic">"Transformation Logic active. Awaiting RCM stream."</p>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
